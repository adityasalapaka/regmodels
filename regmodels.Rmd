---
title: "Regression Models, Course Project"
author: "Aditya Salapaka"
date: "Tuesday 28 April 2015"
output: html_document
---

# Reproducible Research, Course Project
The objective is to explore the relationship between a set of variables and MPG,
and attempt to answer the following questions:

* “Is an automatic or manual transmission better for MPG?”

* "Quantify the MPG difference between automatic and manual transmissions"

## About The Dataset
The `mtcars` dataset was extracted from the 1975 Motor Trend US magazine, and
comprises fuel consumption and ten aspects of automobile design and performance
for 32 automobiles (1973-74 models).

## Data Transformation

The dataset was loaded into R, and the appropriate varibles were factored.

```{r}
data(mtcars)
mtcars$cyl <- factor(mtcars$cyl)
mtcars$vs <- factor(mtcars$vs)
mtcars$am <- factor(mtcars$am, labels = c("Automatic", "Manual"))
mtcars$gear <- factor(mtcars$gear)
mtcars$carb <- factor(mtcars$carb)
```

## Exploratory Data Analysis

Following is a pairs plot of the `mtcars` dataset.
```{r cache = TRUE}
require("GGally")
ggpairs(mtcars, axisLabels = "internal")
```

The pairs plot shows that many variables have a correlation with mpg. 

Following is a boxplot between `mpg` and `am`.

```{r}
require("ggplot2")
g <- ggplot(mtcars, aes(am, mpg))
g <- g + geom_boxplot() + xlab("Transmission Type") + ylab("MPG") + 
        geom_jitter()
print(g)
```

It is clear that manual transmission corresponds to an increase in mpg. This 
will be proven with a suitable regression model.

## Regression Analysis
Since it is not known whcih variables have a significant impact, a specific 
model cannot be chosen immediately. For this, a base model correlating all 
variables with `mpg` will be created, and the `step` function will iterate 
multiple regression models to choose the best one.

```{r results='hide'}
initial <- lm(mpg ~ ., data = mtcars)
best <- step(initial, direction = "both")
```

```{r}
summary(best)
```


The best model has `mpg` depending on `cyl`, `hp`, `wt` and `am`. It has an 
adjusted R-squared value of `r summary(best)$adj.r.squared`, which is the highest achievable value. 

To check that variables other than `am` also contribute to a change in `mpg`,
the `anova` test can be run. The null hypthesis is that `cyl`, `hp`, `wt` and
`am` do not affect `mpg`.

```{r}
base <- lm(mpg ~ am, data = mtcars)
anova(base, best)
```

A p-value of 1.69e-08 helps us reject the null hypothesis.

